# Лабораторная работа 1 python -- калькулятор М3

## Структура проекта

 <pre>
    .
    ├── laba-1-python                          # Кодовая база моей лабораторной работы
    │   ├── src/                               # Исходный код
    │   ├── tests/                             # Unit тесты
    │   ├── uv.lock                            # зависимости моего проекта
    │   ├── report.pdf                         # Отчет
    │   ├── .gitignore                         # git ignore файл
    │   ├──.pre-commit-config.yaml             # Средства автоматизации проверки кодстайла
    │   ├── README.md                          # Описание моего проекта, с описанием файлов и с титульником о том,
                                               # что и какая задача
</pre>

## Структура папки src -- исходный код калькулятора

<pre>
    .
    ├── src                                    
    │   ├── main.py                            # Файл с точкой входа main()
    │   ├── calculator.py                      # Функция calculator()
    │   ├── functions.py                       # Дополнительная функция calculate_brackets()
    │   ├── error.py                           # Класс для ошибок
    │   ├── __init__.py
</pre>

## Структура папки tests -- unit тесты для программы

<pre>
    .
    ├── tests
    │   ├── tests_base                         # Файл с unit тестами 
    │   ├── __init__.py
</pre>

## Принцип работы:
Запуск приложения происходит через файл main.py и функцию main()

Внутри файла:
- Импорт функции calculator()
- Ввод выражения пользователем
- Вывод ответа через точку входа и функцию main()

Внутри файла calculator.py:
- Реализация функции calculator(expression), где expression -- пользовательский ввод
- Проверка ввода с помощью условий: на каждое условие пояснение в виде ошибки класса ошибок
- Токенизация в список tokens: с помощью методов .strip(), .replace(), .split(), обработка двойных операторов (//, **)
- Удаление незначащих скобок циклом while
- Реализация стека с помощью списка stack и цикла while, в котором tokens[i] -- итерируемый токен, i --- индекс итерации
- Проверка и добавление числа в стек методами .isdigit() и .count()
- Использование функции calculate_brackets из файла functions.py для подсчёта выражений в скобках
- Обработка унарного плюса ($) и минуса (~) с использованием двух предыдущих пунктов
- Обработка операторов: ошибка при неизвестном операнде, недостатке опреаторов, при любом возможном делении на ноль
- Сохранение результата функции как единственного элемента списка stack и проверка на единственность этого элемента

Внутри файла functions.py:
- Импорт функции calculator()
- Функция calculate_brackets(tokens, i), где tokens -- весь массив токенов, i -- индекс начала выражения внутри строки, используется в самой функции и в файле calculator.py. Функция вычисляет выражение внутри скобки, используя рекурсивный спуск к функции calculator() -- возвращает список из 2 элементов: найденное значение и индекс конца выражения внутри скобок

Внутри файла error -- класс ошибок

Внутри файла test_base -- тесты для проверки

## Допущения:
Допускается ввод пользователем с любым количеством пробелов между операндами и операциями. При исподьзовании операций //, % над типом данных float (числа с точкой) выражение считается как в python. Любое допущенное деление на 0, неизвестный операнд или оператор, пустой ввод, незакрытые скобки или некорректная расстановка скобок, отсутствие числа или выражения после унарного знака, недостаток операторов или операндов выдают ошибку

Допускаются следующие операции:
- "+" -- сложение
- "$" -- унарный плюс
- "-" -- вычитание
- "~" -- унарный минус
- "**" -- возведение в степень
- "*" -- умножение
- "/" -- деление
- "//" -- целочисленное деление
- "%" -- взятие остатка от деления
- (expression) -- выражение в скобках

Операнды -- любые целые числа или числа с точкой